<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#0a0a0a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>TANGO MAGENTA</title>
  <meta name="description" content="{{TAGLINE}}">

  <!-- OG Tags -->
  <meta property="og:title" content="TANGO MAGENTA">
  <meta property="og:description" content="{{TAGLINE}}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://dtslib1979.github.io/tango-magenta/">
  <meta property="og:site_name" content="TANGO MAGENTA">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- CAVE UI -->
  <link rel="stylesheet" href="design/cave.css">
</head>
<body>

  <!-- ═══ Layer 1: Public Portal ═══ -->

  <!-- Entrance -->
  <section class="cave-entrance" id="entrance">
    <p class="whisper breathe">{{WHISPER_TOP}}</p>
    <h1 class="monument">TANGO<br>MAGENTA</h1>
    <p class="whisper" style="margin-top: 24px;">{{TAGLINE}}</p>

    <div class="cave-divider" style="margin-top: 48px;"></div>

    <a href="#rooms" class="cave-door" style="margin-top: 24px;">
      Enter
    </a>
  </section>

  <!-- Rooms -->
  <section class="cave-section" id="rooms">
    <div class="reveal">
      <p class="whisper">ZONE ALPHA</p>
      <h2 class="cave-card-title" style="margin-top: 8px; font-size: 1.8rem;">{{ZONE_A_TITLE}}</h2>
      <p class="cave-card-text" style="margin-top: 12px;">{{ZONE_A_DESC}}</p>
    </div>

    <div class="cave-divider"></div>

    <div class="reveal">
      <p class="whisper">ZONE BETA</p>
      <h2 class="cave-card-title" style="margin-top: 8px; font-size: 1.8rem;">{{ZONE_B_TITLE}}</h2>
      <p class="cave-card-text" style="margin-top: 12px;">{{ZONE_B_DESC}}</p>
    </div>

    <div class="cave-divider"></div>

    <div class="reveal">
      <p class="whisper">ZONE GAMMA</p>
      <h2 class="cave-card-title" style="margin-top: 8px; font-size: 1.8rem;">{{ZONE_C_TITLE}}</h2>
      <p class="cave-card-text" style="margin-top: 12px;">{{ZONE_C_DESC}}</p>
    </div>
  </section>

  <!-- Content Cards -->
  <section class="cave-section" id="content">
    <p class="whisper reveal">LATEST</p>
    <div id="contentCards" style="margin-top: 24px;">
      <!-- Dynamic content loaded from api/content.json -->
    </div>
  </section>

  <!-- Gate Entry -->
  <section class="cave-section" id="deeper" style="text-align: center;">
    <div class="reveal">
      <p class="whisper">더 깊이 들어가려면</p>
      <a href="inner/" class="cave-door" style="margin-top: 24px; display: inline-block;">
        Inner Portal
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="cave-footer">
    <p class="cave-footer-brand">TANGO MAGENTA</p>
    <p class="cave-footer-copy">&copy; 2026 TANGO MAGENTA. All rights reserved.</p>
  </footer>

  <!-- Scripts -->
  <script src="design/cave.js"></script>
  <script>
    // Load content cards from API
    async function loadContent() {
      try {
        const res = await fetch('api/content.json');
        if (!res.ok) return;
        const data = await res.json();
        const container = document.getElementById('contentCards');

        data.items.slice(0, 5).forEach(item => {
          const card = document.createElement('div');
          card.className = 'cave-card reveal';
          card.innerHTML = `
            <p class="whisper">${item.zone || ''}</p>
            <h3 class="cave-card-title">${item.title}</h3>
            <p class="cave-card-text">${item.excerpt || ''}</p>
          `;
          container.appendChild(card);
        });

        // Re-observe new elements
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
        }, { threshold: 0.1 });
        container.querySelectorAll('.reveal').forEach(el => observer.observe(el));
      } catch (e) { /* silent */ }
    }

    document.addEventListener('DOMContentLoaded', loadContent);
  </script>

  <!-- DTSLIB HQ Bridge SDK -->
  <script src="https://dtslib1979.github.io/dtslib-branch/hq/sdk/dtslib-bridge.js"></script>
</body>
</html>
