<!DOCTYPE html>
<html lang="es-AR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#0a0008">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>TANGO MAGENTA — Studio OS</title>
  <meta name="description" content="El primer sistema que respira. Donde el cuerpo es la interfaz y el tango es el protocolo. 서울 강남 탱고 아카데미.">
  <meta name="keywords" content="tango, 탱고, 강남 탱고, tango magenta, 탱고 마젠타, 강남구청역, 탱고 학원, academia de tango">

  <!-- Korean SEO -->
  <meta name="description" lang="ko" content="탱고 마젠타 — 서울 강남 탱고 아카데미. 강남구청역 3-1번 출구 도보 1분. 입문 정규 클래스 & 원데이 클래스.">

  <!-- OG -->
  <meta property="og:title" content="TANGO MAGENTA — Studio OS">
  <meta property="og:description" content="El primer sistema que respira. 서울 강남 탱고 아카데미.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://dtslib1979.github.io/tango-magenta/">
  <meta property="og:site_name" content="TANGO MAGENTA">
  <meta property="og:locale" content="es_AR">
  <meta property="og:locale:alternate" content="ko_KR">

  <!-- Structured Data: LocalBusiness -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "DanceSchool",
    "name": "탱고 마젠타",
    "alternateName": "TANGO MAGENTA",
    "url": "https://dtslib1979.github.io/tango-magenta/",
    "telephone": "+82-507-1402-3774",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "선릉로 709 B1",
      "addressLocality": "강남구",
      "addressRegion": "서울특별시",
      "addressCountry": "KR"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": 37.5172,
      "longitude": 127.0473
    },
    "openingHours": "Mo-Su",
    "priceRange": "₩10,000-₩80,000",
    "sameAs": ["http://cafe.naver.com/thestep2011"],
    "description": "서울 강남 탱고 아카데미. 강남구청역 3-1번 출구 도보 1분.",
    "knowsAbout": ["Argentine Tango", "Milonga", "Tango Nuevo"]
  }
  </script>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">

  <!-- Preload critical -->
  <link rel="preload" href="design/tango.css" as="style">
  <link rel="preload" href="design/entrada.js" as="script">


  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=DM+Sans:wght@300;400;500&family=JetBrains+Mono:wght@300;400&family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">

  <!-- Design System -->
  <link rel="stylesheet" href="design/tango.css">
</head>
<body class="con-reproductor">

  <!-- ═══ Ritual de Entrada ═══ -->
  <div class="ritual" role="presentation" aria-hidden="true">
    <p class="ritual-texto">Respirá despacio.</p>
    <button class="ritual-saltar" aria-label="건너뛰기">건너뛰기</button>
  </div>

  <!-- ═══ Ribbon — 인연의 실 (Thread of Fate) ═══ -->
  <div class="ribbon-container" id="ribbonContainer" aria-hidden="true">
    <svg class="ribbon-svg" viewBox="0 0 430 932" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="ribbon-glow">
          <feGaussianBlur in="SourceGraphic" stdDeviation="3" result="blur"/>
          <feMerge>
            <feMergeNode in="blur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <filter id="ribbon-ambient">
          <feGaussianBlur in="SourceGraphic" stdDeviation="8"/>
        </filter>
      </defs>

      <!-- Ambient glow layer (wide, soft, behind everything) -->
      <path class="ribbon-path ribbon-path--ambient" id="ribbonAmbient"
        d="M 215 -10
           C 300 60, 130 130, 340 200
           S 90 290, 260 370
           C 380 430, 60 500, 215 580
           S 360 660, 170 740
           C 50 800, 370 860, 215 942" />

      <!-- Main silk ribbon — core thread -->
      <path class="ribbon-path ribbon-path--main" id="ribbonMain"
        d="M 215 -10
           C 300 60, 130 130, 340 200
           S 90 290, 260 370
           C 380 430, 60 500, 215 580
           S 360 660, 170 740
           C 50 800, 370 860, 215 942" />

      <!-- Silk thread 1 — tight weave, slight offset left -->
      <path class="ribbon-path ribbon-path--thread" id="ribbonThread1"
        d="M 210 -10
           C 290 65, 125 135, 333 205
           S 85 295, 254 375
           C 372 435, 55 505, 209 585
           S 353 665, 164 745
           C 44 805, 363 865, 209 942" />

      <!-- Silk thread 2 — tight weave, slight offset right -->
      <path class="ribbon-path ribbon-path--thread" id="ribbonThread2"
        d="M 220 -10
           C 310 55, 137 125, 347 195
           S 97 285, 266 365
           C 388 425, 67 495, 221 575
           S 367 655, 176 735
           C 57 795, 377 855, 221 942" />

      <!-- Partner echo — distant trace -->
      <path class="ribbon-path ribbon-path--echo" id="ribbonEcho1"
        d="M 190 -10
           C 100 80, 330 160, 150 260
           S 350 350, 190 440
           C 60 520, 370 600, 240 700
           S 100 800, 250 942" />
    </svg>
  </div>

  <!-- ═══ I. Monumento ═══ -->
  <section class="espacio-centro" aria-label="Entrada">
    <p class="susurro latido">EL PRIMER SISTEMA QUE <span class="magenta">RESPIRA</span></p>

    <h1 class="monumento mt-lg">TANGO<br>MAGENTA</h1>

    <p class="voz mt-xl">
      Donde el <span class="magenta">cuerpo</span> es la <span class="magenta">interfaz</span><br>
      y el tango es el <span class="magenta">protocolo</span>.
    </p>
    <span lang="ko" class="ko mt-sm">몸이 인터페이스이고, 탱고가 프로토콜인 곳.</span>

    <div class="linea"></div>

    <a href="#pisos" class="puerta puerta--principal" aria-label="Entrar">
      Entrá.
    </a>
  </section>

  <!-- ═══ Dance Video — La Danza ═══ -->
  <section class="danza-section revelar" id="danza" aria-label="La Danza">
    <div class="danza-video-wrap">
      <video class="danza-video"
             src="danza-mobile.mp4"
             poster="danza-poster.jpg"
             autoplay
             muted
             loop
             playsinline
             preload="metadata"
             aria-label="Tango dance"></video>
      <div class="danza-caption">
        <p class="susurro">EL CUERPO HABLA</p>
      </div>
    </div>
  </section>

  <!-- ═══ II. Los 5 Pisos ═══ -->
  <section class="espacio" id="pisos" aria-label="Studio OS">

    <!-- 1F: Academia — Floor Plan -->
    <article class="tarjeta revelar cad-plano" aria-label="1F Academia Floor Plan">
      <p class="susurro">1F — ACADEMIA</p>

      <svg class="cad-svg" viewBox="0 0 300 260" xmlns="http://www.w3.org/2000/svg" aria-label="Studio B1">
        <defs>
          <style>
            .w-ext { stroke: rgba(200,225,210,0.6); fill: none; stroke-width: 2.5; stroke-linecap: square; }
            .w-int { stroke: rgba(200,225,210,0.35); fill: none; stroke-width: 1.5; }
            .w-door { stroke: rgba(200,225,210,0.25); fill: none; stroke-width: 0.8; }
            .rm { fill: transparent; cursor: pointer; }
            .rm:active { fill: rgba(233,30,99,0.1); }
            .t-code { font-family: 'JetBrains Mono',monospace; font-size: 10px; fill: rgba(200,225,210,0.55); letter-spacing: 0.5px; }
            .t-name { font-family: 'Noto Sans KR',sans-serif; font-size: 11px; fill: rgba(240,232,236,0.8); font-weight: 500; }
            .t-price { font-family: 'JetBrains Mono',monospace; font-size: 8px; fill: rgba(255,213,79,0.55); }
            .t-dim { font-family: 'JetBrains Mono',monospace; font-size: 7px; fill: rgba(200,225,210,0.2); }
            .d-line { stroke: rgba(200,225,210,0.12); stroke-width: 0.5; }
          </style>
        </defs>

        <!-- Outer walls -->
        <rect x="15" y="15" width="270" height="220" class="w-ext"/>

        <!-- Main Hall L1 -->
        <a href="emisión/l1/">
          <rect x="15" y="15" width="270" height="110" class="rm"/>
        </a>
        <line x1="15" y1="125" x2="285" y2="125" class="w-int"/>
        <line x1="130" y1="125" x2="165" y2="125" stroke="#091209" stroke-width="2.5"/>
        <path d="M 130 125 Q 130 112 145 112" class="w-door"/>
        <text x="150" y="62" text-anchor="middle" class="t-code">L1</text>
        <text x="150" y="80" text-anchor="middle" class="t-name">Signature Step</text>
        <text x="150" y="96" text-anchor="middle" class="t-price">₩29,000</text>

        <!-- L2 center -->
        <a href="emisión/l2/">
          <rect x="75" y="125" width="130" height="60" class="rm"/>
        </a>
        <line x1="75" y1="125" x2="75" y2="185" class="w-int"/>
        <line x1="205" y1="125" x2="205" y2="185" class="w-int"/>
        <line x1="75" y1="185" x2="205" y2="185" class="w-int"/>
        <line x1="110" y1="125" x2="128" y2="125" stroke="#091209" stroke-width="2"/>
        <text x="140" y="152" text-anchor="middle" class="t-code">L2</text>
        <text x="140" y="170" text-anchor="middle" class="t-name">Partner Mastery</text>

        <!-- L3 left -->
        <a href="emisión/l3/">
          <rect x="15" y="125" width="60" height="60" class="rm"/>
        </a>
        <line x1="40" y1="185" x2="58" y2="185" stroke="#091209" stroke-width="2"/>
        <path d="M 40 185 Q 40 196 50 196" class="w-door"/>
        <text x="45" y="152" text-anchor="middle" class="t-code">L3</text>
        <text x="45" y="170" text-anchor="middle" class="t-name">Film</text>

        <!-- L4 right -->
        <a href="emisión/l4/">
          <rect x="205" y="125" width="80" height="60" class="rm"/>
        </a>
        <line x1="215" y1="125" x2="232" y2="125" stroke="#091209" stroke-width="2"/>
        <path d="M 232 125 Q 232 137 222 137" class="w-door"/>
        <text x="245" y="152" text-anchor="middle" class="t-code">L4</text>
        <text x="245" y="170" text-anchor="middle" class="t-name">B.A.</text>

        <!-- Club bottom right -->
        <a href="emisión/club/">
          <rect x="140" y="185" width="145" height="50" class="rm"/>
        </a>
        <line x1="140" y1="185" x2="140" y2="235" class="w-int"/>
        <line x1="140" y1="195" x2="140" y2="215" stroke="#091209" stroke-width="2"/>
        <path d="M 140 195 Q 127 195 127 205" class="w-door"/>
        <text x="212" y="208" text-anchor="middle" class="t-code">CLUB</text>
        <text x="212" y="225" text-anchor="middle" class="t-name">프랙티스</text>

        <!-- 1-Day bottom left -->
        <a href="emisión/oneday/">
          <rect x="15" y="185" width="125" height="50" class="rm"/>
        </a>
        <line x1="50" y1="235" x2="78" y2="235" stroke="#091209" stroke-width="3"/>
        <path d="M 50 235 Q 50 248 63 246" class="w-door"/>
        <text x="77" y="208" text-anchor="middle" class="t-code">1-DAY</text>
        <text x="77" y="225" text-anchor="middle" class="t-name">원데이</text>
        <text x="77" y="238" text-anchor="middle" class="t-price">₩10,000</text>

        <!-- Minimal dimension -->
        <line x1="15" y1="8" x2="285" y2="8" class="d-line"/>
        <text x="150" y="7" text-anchor="middle" class="t-dim">B1 · 선릉로 709</text>

        <!-- Entrance arrow -->
        <polygon points="64,250 64,256 58,253" fill="rgba(233,30,99,0.35)"/>
        <text x="70" y="255" class="t-dim" style="fill:rgba(233,30,99,0.4);">ENTRADA</text>
      </svg>
    </article>

    <div class="linea"></div>

    <!-- 2F: Tutorial -->
    <article class="tarjeta revelar">
      <p class="susurro">2F — TUTORIAL</p>
      <h2 class="tarjeta-titulo">Body Grammar</h2>
      <p class="tarjeta-texto">
        Manos, pies, <span class="magenta">peso</span>, <span class="magenta">ritmo</span>.
        Zoom-in al detalle. Seguí con el cuerpo.
      </p>
      <span lang="ko" class="ko">손, 발, 무게, 리듬. 몸으로 따라와.</span>
      <a href="cuerpo/" class="puerta mt-md">Seguí</a>
    </article>

    <div class="linea"></div>

    <!-- 3F: Gesture Lab -->
    <article class="tarjeta revelar" data-floor="3">
      <p class="susurro">3F — GESTURE LAB</p>
      <h2 class="tarjeta-titulo">Motor de Gestos</h2>
      <p class="tarjeta-texto">
        Body protocol. Donde la <span class="magenta">danza</span> se vuelve sistema.
      </p>
      <span lang="ko" class="ko">몸의 프로토콜. 춤이 시스템이 되는 곳.</span>
      <a href="laboratorio/" class="puerta mt-md">Experimentá</a>
    </article>

    <div class="linea"></div>

    <!-- 4F: Control Room -->
    <article class="tarjeta revelar" data-floor="4">
      <p class="susurro">4F — CONTROL</p>
      <h2 class="tarjeta-titulo">Control Room</h2>
      <p class="tarjeta-texto">
        Claude + Chrome. El <span class="magenta">pulso</span> del sistema.
      </p>
      <span lang="ko" class="ko">자동화, 메트릭스, 시스템의 심장박동.</span>
      <a href="control/" class="puerta mt-md">Observá</a>
    </article>

    <div class="linea"></div>

    <!-- 5F: Strategy -->
    <article class="tarjeta revelar" data-floor="5">
      <p class="susurro">5F — STRATEGY</p>
      <h2 class="tarjeta-titulo">Expansión</h2>
      <p class="tarjeta-texto">
        Partnerships, <span class="magenta">estructura</span> de ingresos. El futuro del <span class="magenta">legado</span>.
      </p>
      <span lang="ko" class="ko">확장, 파트너십, 레거시의 미래.</span>
      <a href="legado/" class="puerta mt-md">Mirá</a>
    </article>

  </section>

  <!-- ═══ III. Manifiesto — Stone Tablets ═══ -->
  <section class="tablet-section" aria-label="Manifiesto">
    <p class="susurro revelar" style="text-align:center; padding-top: var(--s-xl);">MANIFIESTO</p>

    <div class="tablet-carousel" id="tabletCarousel">
      <div class="tablet-track" id="tabletTrack">

        <div class="tablet">
          <div class="tablet-block">
            <span class="tablet-numeral">I</span>
            <p class="tablet-text">
              No construimos software.<br>
              Construimos <span class="tablet-glow">mundos</span>.
            </p>
            <span lang="ko" class="tablet-ko">소프트웨어가 아닌 세계를.</span>
          </div>
        </div>

        <div class="tablet">
          <div class="tablet-block">
            <span class="tablet-numeral">II</span>
            <p class="tablet-text">
              No diseñamos interfaces.<br>
              Diseñamos <span class="tablet-glow">encuentros</span>.
            </p>
            <span lang="ko" class="tablet-ko">인터페이스가 아닌 만남을.</span>
          </div>
        </div>

        <div class="tablet">
          <div class="tablet-block">
            <span class="tablet-numeral">III</span>
            <p class="tablet-text">
              No programamos funciones.<br>
              Programamos <span class="tablet-glow">rituales</span>.
            </p>
            <span lang="ko" class="tablet-ko">함수가 아닌 의식을.</span>
          </div>
        </div>

        <div class="tablet">
          <div class="tablet-block">
            <span class="tablet-numeral">IV</span>
            <p class="tablet-text">
              El <span class="tablet-glow">cuerpo</span> es la primera<br>
              tecnología.
            </p>
            <span lang="ko" class="tablet-ko">몸은 최초의 기술.</span>
          </div>
        </div>

        <div class="tablet">
          <div class="tablet-block">
            <span class="tablet-numeral">V</span>
            <p class="tablet-text">
              El tango no se enseña.<br>
              Se <span class="tablet-glow">transmite</span>.
            </p>
            <span lang="ko" class="tablet-ko">탱고는 가르치는 게 아니라 전해지는 것.</span>
          </div>
        </div>

        <div class="tablet">
          <div class="tablet-block">
            <span class="tablet-numeral">VI</span>
            <p class="tablet-text">
              La <span class="tablet-glow">pausa</span> es tan importante<br>
              como el movimiento.
            </p>
            <span lang="ko" class="tablet-ko">멈춤은 움직임만큼 중요하다.</span>
          </div>
        </div>

        <div class="tablet">
          <div class="tablet-block">
            <span class="tablet-numeral">VII</span>
            <p class="tablet-text">
              Cada sesión es<br>
              <span class="tablet-glow">irrepetible</span>.
            </p>
            <span lang="ko" class="tablet-ko">모든 세션은 반복 불가.</span>
          </div>
        </div>

      </div>
    </div>

    <div class="tablet-dots" id="tabletDots"></div>
  </section>

  <!-- ═══ IV. Portal Interno — Huella + Partner Invite ═══ -->
  <section class="espacio-centro revelar" aria-label="Portal" id="portal">
    <p class="susurro">PARA LOS QUE YA SABEN</p>

    <a href="inner/" class="huella-link mt-lg" aria-label="Portal Interno">
      <svg class="huella-svg" viewBox="0 0 120 140" xmlns="http://www.w3.org/2000/svg">
        <!-- Fingerprint ridges — stylized concentric arcs -->
        <path class="huella-ridge huella-ridge--1" d="M 60 125 C 25 125, 18 90, 18 70 C 18 35, 40 15, 60 15 C 80 15, 102 35, 102 70 C 102 90, 95 125, 60 125" />
        <path class="huella-ridge huella-ridge--2" d="M 60 115 C 32 115, 28 88, 28 70 C 28 42, 42 25, 60 25 C 78 25, 92 42, 92 70 C 92 88, 88 115, 60 115" />
        <path class="huella-ridge huella-ridge--3" d="M 60 105 C 38 105, 36 85, 36 70 C 36 50, 46 35, 60 35 C 74 35, 84 50, 84 70 C 84 85, 82 105, 60 105" />
        <path class="huella-ridge huella-ridge--4" d="M 60 95 C 45 95, 44 82, 44 70 C 44 56, 50 45, 60 45 C 70 45, 76 56, 76 70 C 76 82, 75 95, 60 95" />
        <path class="huella-ridge huella-ridge--5" d="M 60 85 C 52 85, 52 78, 52 70 C 52 62, 55 55, 60 55 C 65 55, 68 62, 68 70 C 68 78, 68 85, 60 85" />
        <!-- Center whorl -->
        <circle class="huella-core" cx="60" cy="70" r="4" />
      </svg>
      <span lang="ko" class="huella-label">파트너를 초대하세요</span>
    </a>

    <!-- Invite Code (shown when solo) -->
    <div class="invite-code" id="inviteCode" style="display:none;"></div>

    <!-- Partner Code Input -->
    <input type="text" class="partner-code" placeholder="파트너 코드 입력" lang="ko" aria-label="파트너 코드">
  </section>

  <!-- ═══ V. Footer ═══ -->
  <footer class="pie" role="contentinfo">
    <p class="pie-marca respirar">TANGO MAGENTA</p>
    <p class="pie-copy">&copy; 2026 Buenos Aires / Seoul</p>
  </footer>

  <!-- ═══ Audio Layer (CNN Breaking Ticker) ═══ -->
  <div class="reproductor" id="reproductor" aria-label="Audio">
    <div class="ticker" id="ticker">
      <div class="ticker-badge">
        <span class="ticker-dot"></span>
        <span class="ticker-label">LIVE</span>
      </div>
      <div class="ticker-scroll">
        <span class="ticker-text"><b>Por una Cabeza</b> — Carlos Gardel<span class="sep"></span>TANGO MAGENTA RADIO<span class="sep"></span>Buenos Aires / Seoul<span class="sep"></span><b>Por una Cabeza</b> — Carlos Gardel<span class="sep"></span>TANGO MAGENTA RADIO<span class="sep"></span>Buenos Aires / Seoul<span class="sep"></span></span>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="design/tango-partner.js"></script>
  <script src="design/entrada.js"></script>
  <script src="design/body-protocol.js"></script>

  <!-- Tablet Carousel -->
  <script>
  (function() {
    var track = document.getElementById('tabletTrack');
    var dotsEl = document.getElementById('tabletDots');
    if (!track || !dotsEl) return;

    var slides = track.children;
    var total = slides.length;
    var current = 0;
    var startX = 0;
    var dx = 0;
    var dragging = false;
    var autoTimer;

    // Build dots
    for (var i = 0; i < total; i++) {
      var dot = document.createElement('button');
      dot.className = 'tablet-dot' + (i === 0 ? ' active' : '');
      dot.setAttribute('aria-label', 'Slide ' + (i + 1));
      dot.dataset.idx = i;
      dotsEl.appendChild(dot);
    }
    var dots = dotsEl.querySelectorAll('.tablet-dot');

    function goTo(idx) {
      current = (idx + total) % total;
      track.style.transform = 'translateX(-' + (current * 100) + '%)';
      for (var j = 0; j < dots.length; j++) {
        dots[j].classList.toggle('active', j === current);
      }
    }

    function next() { goTo(current + 1); }

    function resetAuto() {
      clearInterval(autoTimer);
      autoTimer = setInterval(next, 4500);
    }

    // Touch — prevent browser back/forward navigation on horizontal swipe
    var startY = 0;
    var isHorizontal = false;

    track.addEventListener('touchstart', function(e) {
      dragging = true;
      isHorizontal = false;
      startX = e.touches[0].clientX;
      startY = e.touches[0].clientY;
      dx = 0;
      track.style.transition = 'none';
      clearInterval(autoTimer);
    }, { passive: true });

    track.addEventListener('touchmove', function(e) {
      if (!dragging) return;
      dx = e.touches[0].clientX - startX;
      var dy = e.touches[0].clientY - startY;
      if (!isHorizontal && Math.abs(dx) > 8) {
        isHorizontal = Math.abs(dx) > Math.abs(dy);
      }
      if (isHorizontal) {
        e.preventDefault();
        var offset = -(current * 100) + (dx / track.offsetWidth) * 100;
        track.style.transform = 'translateX(' + offset + '%)';
      }
    }, { passive: false });

    track.addEventListener('touchend', function() {
      if (!dragging) return;
      dragging = false;
      track.style.transition = '';
      if (isHorizontal) {
        if (dx < -40) next();
        else if (dx > 40) goTo(current - 1);
        else goTo(current);
      }
      isHorizontal = false;
      resetAuto();
    });

    // Dots click
    dotsEl.addEventListener('click', function(e) {
      var t = e.target;
      if (t.dataset && t.dataset.idx !== undefined) {
        goTo(parseInt(t.dataset.idx));
        resetAuto();
      }
    });

    resetAuto();
  })();
  </script>

  <!-- Ribbon Animation — 인연의 실 -->
  <script>
  (function() {
    'use strict';
    var container = document.getElementById('ribbonContainer');
    var mainPath = document.getElementById('ribbonMain');
    var ambient = document.getElementById('ribbonAmbient');
    var thread1 = document.getElementById('ribbonThread1');
    var thread2 = document.getElementById('ribbonThread2');
    var echo1 = document.getElementById('ribbonEcho1');
    if (!container || !mainPath) return;

    // Calculate actual path lengths and set dasharray for reveal
    var paths = [
      { el: mainPath, lag: 0 },
      { el: ambient, lag: 0 },
      { el: thread1, lag: 0.02 },
      { el: thread2, lag: 0.04 },
      { el: echo1, lag: 0.1 }
    ];

    paths.forEach(function(p) {
      if (!p.el) return;
      p.len = p.el.getTotalLength();
      p.el.style.strokeDasharray = p.len;
      p.el.style.strokeDashoffset = p.len;
    });

    // Initial draw amount (visible on hero without scrolling)
    var INITIAL_DRAW = 0.22;
    var APPROACH = 'cubic-bezier(0.16, 1, 0.3, 1)';

    // Show ribbon after ritual, then animate initial portion
    var showDelay = sessionStorage.getItem('tango_entered') ? 500 : 5500;
    setTimeout(function() {
      container.classList.add('visible');

      // Staggered initial draw for each layer
      paths.forEach(function(p, i) {
        if (!p.el) return;
        var delay = i * 200;
        var drawAmount = INITIAL_DRAW * Math.max(0.4, 1 - p.lag * 3);
        setTimeout(function() {
          p.el.style.transition = 'stroke-dashoffset 2.5s ' + APPROACH;
          p.el.style.strokeDashoffset = p.len * (1 - drawAmount);
        }, delay);
      });

      // Reset to fast transitions after initial draw
      setTimeout(function() {
        paths.forEach(function(p) {
          if (p.el) p.el.style.transition = 'stroke-dashoffset 0.08s linear';
        });
      }, 3500);
    }, showDelay);

    // Scroll-linked reveal
    var ticking = false;
    function onScroll() {
      if (ticking) return;
      ticking = true;
      requestAnimationFrame(function() {
        var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        var docHeight = document.documentElement.scrollHeight - window.innerHeight;
        var scrollProgress = Math.min(scrollTop / docHeight, 1);

        paths.forEach(function(p) {
          if (!p.el) return;
          var progress = Math.max(INITIAL_DRAW,
            INITIAL_DRAW + Math.max(0, scrollProgress - p.lag) * (1 - INITIAL_DRAW));
          p.el.style.strokeDashoffset = p.len * (1 - progress);
        });

        // Flicker when scrolled
        if (scrollProgress > 0.05) {
          mainPath.classList.add('alive');
          if (thread1) thread1.classList.add('alive');
          if (thread2) thread2.classList.add('alive');
        } else {
          mainPath.classList.remove('alive');
          if (thread1) thread1.classList.remove('alive');
          if (thread2) thread2.classList.remove('alive');
        }

        ticking = false;
      });
    }

    window.addEventListener('scroll', onScroll, { passive: true });
  })();
  </script>

  <!-- DTSLIB HQ -->
  <script src="https://dtslib1979.github.io/dtslib-branch/hq/sdk/dtslib-bridge.js"></script>
</body>
</html>
